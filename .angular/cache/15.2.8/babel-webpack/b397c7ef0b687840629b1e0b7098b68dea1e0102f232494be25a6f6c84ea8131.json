{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet UserHomeComponent = class UserHomeComponent {\n  encodeURIComponent(arg0) {\n    throw new Error('Method not implemented.');\n  }\n  constructor(router, uploadService, userService) {\n    this.router = router;\n    this.uploadService = uploadService;\n    this.userService = userService;\n    this.posts = [];\n    this.postCard = document.getElementById('post-card');\n    this.userId = localStorage.getItem('userId');\n  }\n  ngOnInit() {\n    this.getPosts();\n  }\n  getPosts() {\n    this.uploadService.viewPost().subscribe(res => {\n      this.posts = res.data.reverse();\n    });\n  }\n  tapLike(postId) {\n    const post = this.posts.find(post => post.id === postId);\n    if (post && post.post_likes !== undefined) {\n      let likes = post.post_likes;\n      this.uploadService.likePost(this.userId, postId).subscribe(res => {\n        if (res.statusCode === 204) {\n          post.post_likes = likes + 1;\n          let button = document.getElementById(`likeButton_${postId}`);\n          button.innerHTML = \"Dislike\";\n        } else {\n          post.post_likes = likes - 1;\n          let button = document.getElementById(`likeButton_${postId}`);\n          button.innerHTML = \"Like\";\n        }\n      });\n    }\n  }\n  sendUsername(username) {\n    this.userService.sendUsernameToProfile(username);\n    console.log('the data is', username);\n  }\n};\nUserHomeComponent = __decorate([Component({\n  selector: 'app-user-home',\n  templateUrl: './user-home.component.html',\n  styleUrls: ['./user-home.component.css']\n})], UserHomeComponent);\nexport { UserHomeComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAWlC,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAC9BC,kBAAkB,CAACC,IAAS;IAC5B,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;EAC1C;EAKEC,YAAoBC,MAAc,EAAUC,aAAgC,EAAWC,WAAyB;IAA5F,WAAM,GAANF,MAAM;IAAkB,kBAAa,GAAbC,aAAa;IAA8B,gBAAW,GAAXC,WAAW;IAJlG,UAAK,GAAU,EAAE;IACjB,aAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;IAC/C,WAAM,GAAQC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;EAEwE;EAEpHC,QAAQ;IACN,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEAA,QAAQ;IACN,IAAI,CAACP,aAAa,CAACQ,QAAQ,EAAE,CAACC,SAAS,CAAEC,GAAwE,IAAI;MACnH,IAAI,CAACC,KAAK,GAAGD,GAAG,CAACE,IAAI,CAACC,OAAO,EAAE;IACjC,CAAC,CAAC;EAEJ;EAEAC,OAAO,CAACC,MAAc;IACpB,MAAMC,IAAI,GAAG,IAAI,CAACL,KAAK,CAACM,IAAI,CAAED,IAAI,IAAKA,IAAI,CAACE,EAAE,KAAKH,MAAM,CAAC;IAE1D,IAAIC,IAAI,IAAIA,IAAI,CAACG,UAAU,KAAKC,SAAS,EAAE;MACzC,IAAIC,KAAK,GAAGL,IAAI,CAACG,UAAU;MAE3B,IAAI,CAACnB,aAAa,CAACsB,QAAQ,CAAC,IAAI,CAACC,MAAM,EAAER,MAAM,CAAC,CAACN,SAAS,CAAEC,GAAwC,IAAI;QACtG,IAAIA,GAAG,CAACc,UAAU,KAAK,GAAG,EAAE;UAC1BR,IAAI,CAACG,UAAU,GAAGE,KAAK,GAAG,CAAC;UAC3B,IAAII,MAAM,GAAGvB,QAAQ,CAACC,cAAc,CAAC,cAAcY,MAAM,EAAE,CAAgB;UAC3EU,MAAM,CAACC,SAAS,GAAG,SAAS;SAC7B,MACI;UACHV,IAAI,CAACG,UAAU,GAAGE,KAAK,GAAG,CAAC;UAC3B,IAAII,MAAM,GAAGvB,QAAQ,CAACC,cAAc,CAAC,cAAcY,MAAM,EAAE,CAAgB;UAC3EU,MAAM,CAACC,SAAS,GAAG,MAAM;;MAE7B,CAAC,CAAC;;EAEN;EAGAC,YAAY,CAACC,QAAa;IACxB,IAAI,CAAC3B,WAAW,CAAC4B,qBAAqB,CAACD,QAAQ,CAAC;IAChDE,OAAO,CAACC,GAAG,CAAC,aAAa,EAACH,QAAQ,CAAC;EACrC;CACD;AA/CYlC,iBAAiB,eAL7BD,SAAS,CAAC;EACTuC,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACWxC,iBAAiB,CA+C7B;SA/CYA,iBAAiB","names":["Component","UserHomeComponent","encodeURIComponent","arg0","Error","constructor","router","uploadService","userService","document","getElementById","localStorage","getItem","ngOnInit","getPosts","viewPost","subscribe","res","posts","data","reverse","tapLike","postId","post","find","id","post_likes","undefined","likes","likePost","userId","statusCode","button","innerHTML","sendUsername","username","sendUsernameToProfile","console","log","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["F:\\angular_project\\devClone\\src\\app\\user\\components\\user-home\\user-home.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UploadpostService } from '../../services/uploadpost.service';\nimport { HttpHeaders } from '@angular/common/http';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'app-user-home',\n  templateUrl: './user-home.component.html',\n  styleUrls: ['./user-home.component.css']\n})\nexport class UserHomeComponent {\nencodeURIComponent(arg0: any): any|string {\nthrow new Error('Method not implemented.');\n}\n  posts: any[] = []\n  postCard = document.getElementById('post-card');\n  userId: any = localStorage.getItem('userId')\n\n  constructor(private router: Router, private uploadService: UploadpostService , private userService : UserService) { }\n\n  ngOnInit() {\n    this.getPosts()\n  }\n\n  getPosts() {\n    this.uploadService.viewPost().subscribe((res: { statusCode: Number, msg: string, username_id: Number, data: any }) => {\n      this.posts = res.data.reverse()\n    })\n\n  }\n\n  tapLike(postId: number) {\n    const post = this.posts.find((post) => post.id === postId);\n\n    if (post && post.post_likes !== undefined) {\n      let likes = post.post_likes;\n\n      this.uploadService.likePost(this.userId, postId).subscribe((res: { statusCode: number, msg: string }) => {\n        if (res.statusCode === 204) {\n          post.post_likes = likes + 1;\n          let button = document.getElementById(`likeButton_${postId}`) as HTMLElement;\n          button.innerHTML = \"Dislike\"\n        }\n        else {\n          post.post_likes = likes - 1;\n          let button = document.getElementById(`likeButton_${postId}`) as HTMLElement;\n          button.innerHTML = \"Like\"\n        }\n      });\n    }\n  }\n\n\n  sendUsername(username: any){\n    this.userService.sendUsernameToProfile(username)\n    console.log('the data is',username)\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}